(function($){$.fn.checkFileType=function(options){var defaults={allowedExtensions:[],success:function(){},error:function(){}};options=$.extend(defaults,options);return this.each(function(){$(this).on('change',function(){var value=$(this).val(),file=value.toLowerCase(),extension=file.substring(file.lastIndexOf('.')+1);if($.inArray(extension,options.allowedExtensions)==-1){options.error();$(this).focus();}else{options.success();}});});};})(jQuery);function CheckFormatImage(){var name=jQuery("#image").val();if(jQuery("#image")[0].files[0]){if(jQuery("#image")[0].files[0].size>1024*1024*3){$.jAlert({'title':'Thông báo','content':'Dung lượng ảnh upload tối đa 3MB','theme':'default','btns':{'text':'Ok','theme':'blue','onClick':function(e,btn){e.preventDefault();jQuery("#image").val("");document.getElementById("image").focus();return false;}}});return false;}}if(jQuery("#image")[0].files[0]){if(!name.match(/(?:jpg|png|gif|jpeg)$/)){$.jAlert({'title':'Thông báo','content':'Định dạng ảnh phải là .jpg, .png','theme':'default','btns':{'text':'Ok','theme':'blue','onClick':function(e,btn){e.preventDefault();jQuery("#image").val("");document.getElementById("image").focus();return false;}}});return false;}}}function checkStrength(password){var strength=0;var notallow=["admin123","iloveyou123"];if(password.length<6){$('#result').removeClass();$('#result').addClass('short');return'Mật khẩu quá ngắn'}if(password.length>7)strength+=1;if(password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/))strength+=1;if(password.match(/([a-zA-Z])/)&&password.match(/([0-9])/))strength+=1;if(password.match(/([!,%,&,@,#,$,^,*,?,_,~])/))strength+=1;if(password.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,%,&,@,#,$,^,*,?,_,~])/))strength+=1;if(strength<2||($.inArray(password,notallow)>=0)){$('#result').removeClass();$('#result').addClass('weak');return'Mật khẩu yếu';}else if(strength==2){$('#result').removeClass();$('#result').addClass('good');return'Mật khẩu tốt'}else{$('#result').removeClass();$('#result').addClass('strong');return'Mật khẩu mạnh'}}function bind_select_search(srch,select,arr_name){window[arr_name]=[]
$(select+" option").each(function(){window[arr_name][this.value]=this.text})
$(srch).keyup(function(e){text=$(srch).val();if(text!=''||e.keyCode==8){arr=window[arr_name]
$(select+" option").remove()
tmp=''
for(key in arr){option_text=arr[key].toLowerCase()
if(option_text.search(text.toLowerCase())>-1){tmp+='<option value="'+key+'">'+arr[key]+'</option>'}}$(select).append(tmp)}})
$(srch).keydown(function(e){if(e.keyCode==8)$(srch).trigger('keyup')})}function isNumberKey(evt){var charCode=(evt.which)?evt.which:evt.keyCode;return!(charCode!=46&&charCode>31&&(charCode<48||charCode>57));}function imgSize(){var myImg=document.querySelector("#sky");var realWidth=myImg.naturalWidth;var realHeight=myImg.naturalHeight;alert("Original width="+realWidth+", "+"Original height="+realHeight);}jQuery(document).ready(function(jQuery){$('#password_regis').keyup(function(){$('#result').html(checkStrength($('#password_regis').val()))});$('#check_notaxcode').click(function(){if($('#check_notaxcode').prop('checked')==true){$('#taxcode_regis').prop('disabled',true);}else{$('#taxcode_regis').prop('disabled',false);}});$('#btn_menu_home').click(function(){$('#menuNavbar').slideToggle(500);});$('#btn_menu').click(function(){$('#menuNavbar').slideToggle(500);});if(window.location.pathname=="/azibai/account/edit"){var full_name=$("#fullname_account").val();if(full_name==""){$.jAlert({'title':'Thông báo','content':'Bạn vui lòng cập nhật đầy đủ thông tin để có thể sử dụng những tính năng của Azibai!','theme':'default','btns':{'text':'Ok','theme':'blue','onClick':function(e,btn){e.preventDefault();document.getElementById("fullname_account").focus();return false;}}});}}bind_select_search('#srch','#cat_pro_1','options');$('.row_none').prev('tr').css('display','none');$('.item_group').prev().find('div.bottom_row').css('display','none');$(".show_sub_cat").click(function(){$('.group_sub_cat').slideToggle(500);});$("#quick_view").click(function(){$('body').css('overflow','hidden');});$(".closepopup").click(function(){$('body').css('overflow','scroll');});$(".show_cat_mb").click(function(){$('#show_cat_mb').slideToggle(500);$('.linkfilter ').slideUp(500);$('#main_menu ').slideUp(500);});jQuery(".btn-filter").click(function(){$('.linkfilter').slideToggle(500);$('#show_cat_mb').slideUp(500);$('#main_menu ').slideUp(500);});jQuery("#search").click(function(){$('.linkfilter').slideUp(500);$('#show_cat_mb').slideUp(500);$('#main_menu ').slideToggle(500);});$('.add_db').click(function(){$('.db_menu_right').slideToggle(500);$('.add_db3').css('display','block');if($('.add_db i').hasClass('fa-chevron-down')){$('.add_db i').removeClass('fa-chevron-down');$('.add_db i').addClass('fa-chevron-up');}else{$('.add_db i.fa').removeClass("fa-chevron-up");$('.add_db i').addClass('fa-chevron-down');}});$("#btn_bank").click(function(){var bank_name=$("#namebank_regis").val();var addbank_regis=$("#addbank_regis").val();var accountname_regis=$("#accountname_regis").val();var accountnum_regis=$("#accountnum_regis").val();if(bank_name==""){alert('Bạn chưa nhập tên ngân hàng!');$("#namebank_regis").focus();return false;}if(addbank_regis==""){alert('Bạn chưa nhập chi nhánh ngân hàng!');$("#addbank_regis").focus();return false;}if(accountname_regis==""){alert('Bạn chưa nhập tên chủ tài khoản!');$("#accountname_regis").focus();return false;}if(accountnum_regis==""){alert('Bạn chưa nhập số tài khoản!');$("#accountnum_regis").focus();return false;}document.frmBank.submit();});$('#options_name_1').click(function(){$('.tax_type').prop('checked',false);$('#tax_code_personal').prop('checked',true);});$('#options_name_2').click(function(){$('.tax_type').prop('checked',false);$('#tax_code_company').prop('checked',true);});$('#clicktonggle').click(function(e){var b=$(this).attr('class');if(b=='up'){$(this).removeClass('up').addClass('down');$('#panel .toggle').slideUp('slow');}else{$(this).removeClass('down').addClass('up');$('#panel .toggle').slideDown('slow');}});$("#image, #image1, #image2, #image3, #image4, #image5, #image6, #image7, #image8").change(function(){var iSize=($(this)[0].files[0].size/1024);if((Math.round((iSize/1024)*100)/100)>3){$.jAlert({'title':'Thông báo','content':'Hình ảnh không quá 3Mb, vui lòng chọn hình khác!','theme':'default','btns':{'text':'Ok','theme':'blue','onClick':function(e,btn){e.preventDefault();jQuery("#image, #image1, #image2, #image3, #image4, #image5, #image6, #image7, #image8").val("");return false;}}});return false;}});$("#image, #image1, #image2, #image3, #image4, #image5, #image6, #image7, #image8").checkFileType({allowedExtensions:['jpg','jpeg','png','gif'],success:function(){},error:function(){$.jAlert({'title':'Thông báo','content':'Định dạng ảnh phải là <b>.jpg, .png, .gif, .jpeg</b>','theme':'default','btns':{'text':'Ok','theme':'blue','onClick':function(e,btn){e.preventDefault();jQuery("#image, #image1, #image2, #image3, #image4, #image5, #image6, #image7, #image8").val("");return false;}}});return false;}});var slider_width=jQuery('.tabs-container').width();jQuery('#xemnhanh').click(function(e){if(jQuery(this).css("margin-right")==slider_width+"px"&&!jQuery(this).is(':animated')){jQuery('.tabs-container,#xemnhanh').animate({"margin-right":'-='+slider_width},'slow');}else{if(!jQuery(this).is(':animated')){jQuery('.tabs-container,#xemnhanh').animate({"margin-right":'+='+slider_width},'slow');}}e.stopPropagation();});jQuery("#header_news a").click(function(e){var target=jQuery(this).attr('href');if(target=='#tin-khuyen-mai'||target=='#tin-xem-nhieu'||target=='#tin-tuc-hot'){$('html, body').stop().animate({'scrollTop':jQuery(target).offset().top-100},900);}});jQuery(".close_chil").click(function(){jQuery('.modal_chil').modal('hide');jQuery('.modal-open .modal').css('overflow-y','auto');});jQuery("#btn_toolbox_right").click(function(e){e.preventDefault();$('#toolbox-right').slideToggle(200);});jQuery('#list').click(function(event){event.preventDefault();jQuery('#products .item').removeClass('grid-group-item');jQuery('#products .item').addClass('list-group-item');});jQuery('#grid').click(function(event){event.preventDefault();jQuery('#products .item').removeClass('list-group-item');jQuery('#products .item').addClass('grid-group-item');});jQuery(".tax_type").click(function(){var check=jQuery(this).attr('checked');if(check=="checked"){jQuery('#taxcode_regis_row').css('display','block');}jQuery('.tax_type').attr('checked',false);jQuery(this).attr('checked',true);});jQuery('input.style_id').on('change',function(){jQuery('input.style_id').not(this).prop('checked',false);});jQuery("#popup_mod .col-lg-4").click(function(){jQuery('#popup_mod .col-lg-4').siblings().removeClass('active');jQuery(this).addClass('active');});$("#image_1_pro, #image_2_pro, #image_3_pro, #image_4_pro, #image_5_pro").change(function(){var iSize=($(this)[0].files[0].size/1024);if((Math.round((iSize/1024)*100)/100)>3){warningAlert('Thông báo','Hình ảnh không quá 3Mb, vui lòng chọn hình khác!');$('#image_1_pro, #image_2_pro, #image_3_pro, #image_4_pro, #image_5_pro').val('');}});$('#image_1_pro, #image_2_pro, #image_3_pro, #image_4_pro, #image_5_pro').checkFileType({allowedExtensions:['jpg','jpeg','png','gif'],success:function(){},error:function(){warningAlert('Thông báo','Hỗ trợ upload định dạng file: <b>jpg, jpeg, png, gif</b>');$('#image_1_pro, #image_2_pro, #image_3_pro, #image_4_pro, #image_5_pro').val('');}});$('.subscribe_btn').button();$('#contact_form').on('submit',function(e){e.preventDefault();var $this=$(this);var $message=$('.message');var $email=$('input[name=email]',this);$message.empty().removeClass('error').removeClass('success').hide();$('.error',$this).remove();var email=$email.val();if(!email||email.indexOf('@')<0){$message.addClass('error').text('Vui lòng nhập email hợp lệ!').show();return false;}$('.subscribe_btn').button('loading');$.post('',$this.serialize(),function(json){$('.btn-submit').button('reset');$message.text(json.message).show();if(json.status=='success'){$message.addClass('success');$('input[type=text]',$this).val('');}else{$message.addClass('error');}},'json');return false;});});